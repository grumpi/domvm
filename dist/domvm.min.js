/*
 https://github.com/leeoniya/domvm (1.x-dev)
*/
("undefined"!==typeof global?global:this).domvm={};(function(w){var r=("undefined"==typeof window?{}:window).requestAnimationFrame,v={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},m={TYPE_ELEM:1,
TYPE_TEXT:2,isArr:function(c){return c instanceof Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!m.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&m.isFunc(c.then)},isElem:function(c){return c instanceof HTMLElement},execAll:function(c,d,g,a,n,x){var t;c&&(m.isArr(c)?c:[c]).forEach(function(c){t=c.call(null,d,g,a,n,x)});return t},tick:function(c,d){d&&r?r&&r(function(){m.tick(c,
d-1)}):m.isArr(c)?c[0].apply(null,c.slice(1)):c()},insertArr:function(c,d,g,a){c.splice.apply(c,[g,a].concat(d))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,d){switch(c){case "input":case "textarea":case "select":case "option":switch(d){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,d){return isNaN(d)||v[c]?d:d+"px"},cmpArr:function(c,d){var g=
c.length;if(g!=d.length)return!1;for(;g--;)if(c[g]!==d[g])return!1;return!0},deepSet:function(c,d,g,a,n,x){d=d.split(".");var t=d.pop();d.forEach(function(a){c[a]||(c[a]={});c=c[a]});if(m.isFunc(c[t]))c[t](g,a,n,x);else c[t]=g},deepGet:function(c,d){var g=d.split(".");do c=c[g.shift()];while(g.length);return c},keyedIdx:function(c,d,g,a,n){for(a=0;a<d.length;a++)if(n=d[a],n.key===c)if(g){if(n.vm&&n.vm.view[0]===g)return a}else return a;return-1},raft:function(c){function d(){g=0;c.apply(a,n)}if(!r)return c;
var g,a,n;return function(){a=this;n=arguments;g||(g=r(d))}}};w.utils=m})(domvm);(function(w){function r(){for(var b;b=L.pop();)b[0].apply(null,b.slice(1))}function v(b,f){return!1===f?null:null==f&&null!=b?b:l.isVal(f)||l.isObj(f)||l.isArr(f)||l.isFunc(f)?f:null}function m(b,f,z,a,e,h){function E(b,f,e){if(e)b[f]=b[f]||[],b[f].push(e);else for(var c in f)b[c]=b[c]||[],b[c].push(f[c])}function u(b,f,c){e=b;h=f;q.update(c,!1);null!=q.node&&(e.body[h]=q.node);return m(0,!1)}function H(b){return null==b?"":b}function m(b,c){if(b){for(var a=q;b--&&a.parent;)a=a.parent;a.redraw(0,
!0);return a.vm}(a=q.node)&&d(q,"willRedraw",q);var y=q.refs;q.refs={};var u=q.render.call(q.api,q,f,z);if(!1===u)return q.node.moved=!0,q.node.wasSame=!0,q.refs=y,q;y=n(u,e,h,q);y.vm=q;q.node=y;u=l.isVal(z)&&"^"===z[0]?z.substr(1):l.isVal(y.ref)&&"^"===y.ref[0]?y.ref.substr(1):null;y.key=null!=z?z:y.key;for(var k=e;k;)k.vm&&(q.parent||(q.parent=k.vm),null!==u&&l.deepSet(k.vm.refs,u,y)),k=k.parent;if((u=a)&&(y.type!==a.type||y.tag!==a.tag))var u=null,H=!0,E=a.el.parentNode;x(y,u);e&&(e.body[h]=y);
!1!==c&&(a&&g(a),!a&&p||t(y,null,y.el),H&&(E||y.parent.el).insertBefore(y.el,E.childNodes[a.idx]));a&&d(q,"didRedraw",q);!1!==c&&l.tick(r,2);return q}var p=!e;l.isArr(b)&&(f=b[1],z=b[2],a=b[3],b=b[0]);z=v(f,z);var q={api:{},node:null,view:[b,z],model:f,opts:a||{},render:null,update:function(b,e){null==b||z===f&&!l.isVal(z)||(f=q.model=b);return!1!==e?m(0):q},on:function(b,f){E(q.events,b,f)},hook:function(b,f){q.hooks=q.hooks||{};E(q.hooks,b,f)},events:{},hooks:null,redraw:J.useRaf?l.raft(m):m,patch:function(b,
f){var e=null!=b.el;if(l.isObj(f)){var c="class"in f?(H(b["class"])+" "+H(f["class"])).trim():b.props["class"],a="style"in f?f.style:b.props.style;e&&(e=Object.create(b.props),e["class"]=c,e.style=a,e={tag:b.tag,el:b.el,ns:b.ns,props:e},k(e,b));b.props["class"]=c;b.props.style=a}else c=b.parent,e=x(n(f,c,b.idx,q),b),c.body[b.idx]=e},emit:function(b){for(var f=Array.prototype.slice.call(arguments),e=q,c;e;){if(c=e.events[b]){f[0]=c;l.execAll.apply(null,f);break}e=e.parent}},refs:{},parent:null,mount:function(b,
f){var e=null;f&&(b.textContent="",e=b,b=null);t(q.node,e,null,b);return q},attach:function(b){c(q.node,b);return q},unmount:function(){g(q.node)},moveTo:u,updIdx:function(b){h=b}};a&&a.hooks&&q.hook(a.hooks);l.execAll(F,q);q.render=b.call(q.api,q,f,z);return e?u(e,h):m(0)}function c(b,f){b.el=f;f._node=b;for(var a in b.props){var y=b.props[a],e=l.isEvProp(a)?a:"."===a[0]?a.substr(1):null;null!==e&&(f[e]=y)}if(l.isArr(b.body))for(a=0;a<b.body.length;a++)c(b.body[a],f.childNodes[a])}function d(b,f,
c,a,e,h){if(b&&b.hooks&&(b=b.hooks[f]))if(J.useRaf&&"did"==f.substr(0,3))L.push([l.execAll,b,c,a,e,h]);else return l.execAll(b,c,a,e,h)}function g(b,f){var c=b.el&&!b.moved;if(c){var y=d(b.vm,"willUnmount",b.vm),e=d(b,"willRemove",b),h=y||e;b.removed=!0}b.wasSame?b.wasSame=!1:(l.isArr(b.body)&&b.body.forEach(function(b,e){g(b,f||h)}),f||(h?h.then(function(){a(b,c)}):a(b,c)));b.moved=!1}function a(b,f){null!=b.el&&b.el.parentNode&&(f&&(b.el.parentNode.removeChild(b.el),b.el=null,d(b.vm,"didUnmount",
b.vm),d(b,"didRemove",b)),l.isArr(b.body)&&b.body.forEach(function(b,f){a(b,!b.moved)}))}function n(b,f,c,a){var e=b;b={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};l.isFunc(e)&&(e=e());var h=e.length;if(l.isArr(e)&&h){b.type=l.TYPE_ELEM;if(1<h){var k=1;l.isObj(e[1])&&!l.isElem(e[1])&&(b.props=e[1],k=2);b.body=h==k+1?l.isVal(e[k])?e[k]:l.isFunc(e[k])?e[k]():e.slice(k):
e.slice(k)}e=e[0];h=M[e];h||(h=["",""],h={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||h)[1],"class":(e.match(/\.([-\w.]+)/)||h)[1].replace(/\./g," ")},M[e]=h);b.tag=h.tag;if(h.id||h["class"])e=b.props||{},h.id&&null==e.id&&(e.id=h.id),h["class"]&&(b["class"]=h["class"],e["class"]=h["class"]+(null!=e["class"]?" "+e["class"]:"")),b.props=e;if(b.props){var e=b.props,u;for(u in e)l.isEvProp(u)?(e[u]._vm=a,e[u]._node=b):l.isFunc(e[u])&&("href"==u?(e.onclick=e[u],e.href=e[u].href):e[u]=
e[u]()),l.isDynProp(b.tag,u)&&(e["."+u]=e[u]);if(l.isObj(e.style))for(var d in e.style)u=e.style[d],l.isFunc(u)&&(e.style[d]=u());l.isObj(e._hooks)&&(b.hooks=e._hooks,e._hooks=null);b.key=l.isVal(e._key)?e._key:l.isVal(e._ref)?e._ref:l.isVal(e.id)?e.id:l.isVal(e.name)?e.name:null;null!=e._ref&&(b.ref=e._ref);e._raw&&(b.raw=!0);null!=e._data&&(b.data=e._data);e._ref=e._key=e._raw=e._data=null}}else l.isVal(e)?(b.type=l.TYPE_TEXT,b.body=e):l.isElem(e)&&(b.type=l.TYPE_ELEM,b.el=e,b.tag=e.nodeName.toLowerCase());
null!==b.ref&&l.deepSet(a.refs,b.ref,b);b.parent=f;b.idx=c;b.ns=f&&f.ns?f.ns:"svg"===b.tag||"math"===b.tag?b.tag:null;if(l.isArr(b.body))for(f=0,c=b.body.length;f<c;f++){d=b.body[f];e=u=null;k=h=!1;l.isFunc(d)&&(d=d());if(null==d)h=!0;else{var g=l.isArr(d),x=g?!1:l.isObj(d);if(g)d.length?"string"==typeof d[0]&&""!==d[0]?(e=n(d,b,f,a),u=e.key):l.isFunc(d[0])?u=v(d[1],d[2]):k=!0:h=!0;else if(x)if(l.isFunc(d.redraw))d.moveTo(b,f),e=d.node,u=d.view[1];else if(l.isElem(d))e=n(d,b,f,a);else{b.body[f--]=
""+d;continue}else""===d?h=!0:0<f&&b.body[f-1].type===l.TYPE_TEXT?(b.body[f-1].body+=""+d,h=!0):e=n(""+d,b,f,a)}h||k?(k?l.insertArr(b.body,d,f,1):b.body.splice(f,1),c=b.body.length,f--):(null!==u&&(b.hasKeys=!0),b.body[f]=e||d)}return b}function x(b,f){f&&(d(b,"willRecycle",f,b),B(f,b),d(b,"didRecycle",f,b));if(l.isArr(b.body)){var c=0;b.body.forEach(function(a,e){var h=l.isArr(a);if(f){var d=p(a,b,f,c);if(null!==d){var k=d[0],d=d[1];k===c&&c++;k=f.body[k];k.vm?h?2===d?k.vm.moveTo(b,e,a[1]):1===d&&
m(a[0],a[1],a[2],a[3],b,e):a.vm&&2===d&&a.vm===k.vm&&k.vm.moveTo(b,e):b.body[e]=x(a,k);return}}h?m(a[0],a[1],a[2],a[3],b,e):b.body[e]=x(a)})}return b}function t(b,f,a,c){for(var e=!b.el;a&&a._node.removed;)a=a.nextSibling;e&&d(b.vm,"willMount",b.vm);if(b.type==l.TYPE_ELEM)if(e&&(b.el=f||(b.ns?D.createElementNS(K[b.ns],b.tag):D.createElement(b.tag)),b.props&&k(b)),l.isArr(b.body)){f=0;for(var h=b.el.firstChild;f<b.body.length;f++)h=t(b.body[f],null,h)}else l.isVal(b.body)&&(b.raw?b.el.innerHTML=b.body:
e&&(b.el.textContent=b.body));else b.type==l.TYPE_TEXT&&e&&(b.el=D.createTextNode(b.body));b.el._node=b;f=b.parent;a!==b.el&&(c||f&&f.el)&&(f=e?"Insert":"Reinsert",d(b,"will"+f,b),(c||b.parent.el).insertBefore(b.el,a),d(b,"did"+f,b));e&&b.vm&&b.vm.hooks&&!b.moved&&d(b.vm,"didMount",b.vm);return a!==b.el?a:a.nextSibling}function p(b,f,a,c,e){var h=l.isArr(b),d=h?v(b[1],b[2]):b.key,k=a.hasKeys,n=f.hasKeys;a=a.body;f=f.body;if(null!==d&&k)return b=l.keyedIdx(d,a,h?b[0]:null),-1<b?[b,2]:null;c=c||0;if(c>
a.length-1)return null;e=0===e?0:e||a.length-1;for(d=null;c<=e;c++)if(k=a[c],null!==k&&k.el)if(h&&k.vm){if(k.vm.view[0]===b[0]){if(k.vm.view[1]===v(b[1],b[2]))return[c,2];!d&&n&&-1==l.keyedIdx(k.key,f,k.vm.view[0])&&(d=[c,1])}}else if(b.type===k.type&&(b.type===l.TYPE_TEXT||null!==b.tag&&b.tag===k.tag)&&(null===k.key||!n||-1==l.keyedIdx(k.key,f,k.vm?k.vm.view[0]:null)))return[c,1];return d}function B(b,f){f.el=b.el;b.el=null;f.el&&(f.el._node=f);if(f.type===l.TYPE_TEXT&&f.body!==b.body)f.el.nodeValue=
f.body;else{k(f,b);var a=!l.isArr(f.body),c=!l.isArr(b.body);a&&f.body!==b.body?c&&f.el.firstChild?f.el.firstChild.nodeValue=f.body:f.raw?f.el.innerHTML=f.body:f.el.textContent=f.body:c&&!a&&(f.el.textContent="");b.moved=!0}}function A(b,f,a,c){return function(a){var h,k=a.target._node,d=null;if(l.isFunc(b))h=b.call(f,a,k,c);else if(l.isArr(b))d=b.slice(1),h=b[0].apply(f,d.concat(a,k,c));else if(l.isObj(b))for(var n in b){var g=b[n];null!=g&&"_"!=n[0]&&a.target.matches(n)&&(l.isArr(g)?(d=g.slice(1),
h=g[0].apply(f,d.concat(a,k,c))):l.isFunc(g)&&(h=g.call(f,a,k,c)))}!1===h&&(a.preventDefault(),a.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:k,event:a,data:d})}}function k(b,a){var c=!a;a=a||{};if(a.props||b.props){var k=a.props||{},e=b.props||{},d=k.style,n=e.style;if(l.isObj(d)||l.isObj(n))h(b.el,b.tag,d||{},n||{},G,N,b.ns,c),k.style=e.style=null;h(b.el,b.tag,k,e,C,I,b.ns,c);n&&(e.style=n)}}function h(b,a,c,h,e,k,d,n){for(var g in h)if(a=h[g],null!==
a){var x="."===g[0]?b[g.substr(1)]:c[g];a===x||l.isArr(a)&&l.isArr(x)&&l.cmpArr(a,x)||e(b,g,a,d,n)}for(g in c)null!==c[g]&&null==h[g]&&k(b,g,d,n)}function G(b,a,c){b.style[a]=l.autoPx(a,c)}function N(b,a){b.style[a]=""}function C(b,a,c,h,e){"."===a[0]?(a=a.substr(1),"svg"===h?b[a].baseVal=c:b[a]=c):"class"===a?b.className=c:"id"===a?b[a]=c:l.isEvProp(a)?(h=c._vm,b[a]=A(c,h.opts.evctx||h.model||null,c._node,h)):!1===c?I(b,a,h,e):b.setAttribute(a,!0===c?"":c)}function I(b,a,c,h){h||("."===a[0]?(a=a.substr(1),
"svg"===c?b[a].baseVal=null:b[a]=null):"class"===a?b.className="":"id"===a||l.isEvProp(a)?b[a]=null:b.removeAttribute(a))}var K={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},D="undefined"==typeof document?{}:document,M={},L=[],J={useRaf:!0};w.view=m;w.view.config=function(b){J=b};var F=null;w.view.extend=function(b,a){F=!F||a?[]:F;F.push(b)};var l=w.utils;return w})(domvm);(function(w){var r=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,v=w.utils;w.html=function(m){var c="";switch(m.type){case v.TYPE_ELEM:c+="<"+m.tag;if(m.props){var d=v.isVal(m.props.style)?m.props.style:"",g=v.isObj(m.props.style)?m.props.style:null;if(g)for(var a in g)null!==g[a]&&(d+=v.camelDash(a)+": "+v.autoPx(a,g[a])+"; ");for(a in m.props)v.isEvProp(a)||"."===a[0]||(g=m.props[a],v.isFunc(g)&&(g=g()),v.isObj(g)||(!0===g?c+=" "+a:!1!==g&&null!==g&&
"."!==a[0]&&(c+=" "+a+'="'+g+'"')));d.length&&(c+=' style="'+d.trim()+'"')}if(m.ns&&"svg"!==m.tag&&"math"!==m.tag&&!m.body)return c+"/>";c+=">";break;case v.TYPE_TEXT:return m.body}r.test(m.tag)||(v.isArr(m.body)?m.body.forEach(function(a){c+=w.html(a)}):c+=m.body||"",c+="</"+m.tag+">");return c}})(domvm);(function(w){var r=w.utils;w.watch=function(v){function m(){}function c(a,c,d,t,p){p=p||{};p.method=a.toUpperCase();"credentials"in p||(p.credentials="same-origin");null!==d&&(r.isArr(d)||r.isObj(d)?(p.headers=p.headers||new Headers,p.headers.set("Content-Type","application/json"),p.body=JSON.stringify(d)):p.body=""+d);var B=t,A=m;t instanceof Array&&(B=t[0],t[1]&&(A=t[1]));var k={type:"fetch",fetch:{method:a,url:c,body:d}};t=fetch(c,p).then(function(a){if(200<=a.status&&300>a.status)return a;var c=
Error(a.status+": "+a.statusText);c.data=a;return Promise.reject(c)}).then(function(a){switch(a.headers.get("Content-Type").split("; ")[0]){case "application/json":return a.json();case "text/plain":return a.text();default:return a}}).then(B,A).then(function(a){!1!==a&&g.fire(k);return a},function(a){k.error=a;g.fire(k);return a});t._fetchArgs=[a,c,d,[B,A],p];return t}var d=[];r.isFunc(v)&&d.push(v);var g={on:function(a){d.push(a);return g},off:function(a){d.splice(d.indexOf(a),1);return g},fire:r.raft(function(a){r.execAll(d,
a);return g}),prop:function(a,d,x){var t=a,p=function(a,c,d){if(arguments.length&&a!==t){var n=t;t=a;d=d||{type:"prop",prop:p,data:{old:n,"new":a}};x&&(d["new"]=x(d));if(d["new"]===n)return;r.isFunc(c)?c(d):!1!==c&&g.fire(d)}return t};p._prop=!0;if(d&&d.then){p.update=m;if(d._fetchArgs){var B=d._fetchArgs[3];d._fetchArgs[3]=[function(a){return p(B[0]?B[0](a):a)},B[1]];p.update=function(){c.apply(null,d._fetchArgs)}}d.then(p)}return p.toString=p},sync:function(a,c,d){var m=a,p=c;r.isFunc(m)||(m=function(c,
d,k){if("string"==typeof a){var h,g;"e."==a.substr(0,2)?(h=c,g=a.substr(2)):(h=c.target,g=a)}return r.deepGet(h,g)});r.isArr(p)&&(p=function(a,d,k){var h=c[0],m=c[1];r.isFunc(m)&&(m=m(k.event,k.node,k.vm));var x=r.deepGet(h,m);a!==x&&(r.deepSet(h,m,a,d,k),r.isFunc(d)?d(k):!1!==d&&g.fire(k))});return function(a,c,k){var h={type:"sync",vm:k,node:c,event:a};p(m(a,c,k),d,h)}},fetch:c,get:function(a,d,m){m?a+=g.query(d):m=d;return c("get",a,null,m)},"delete":function(a,d,m){m?a+=g.query(d):m=d;return c("delete",
a,null,m)},post:function(a,d,g){return c("post",a,d,g)},put:function(a,d,g){return c("put",a,d,g)},patch:function(a,d,g){return c("patch",a,d,g)},query:function(a){if(!r.isObj(a))return"";var c=[],d=encodeURIComponent,g;for(g in a)c.push(d(g)+"="+d(a[g]));return c.length?"?"+c.join("&"):""}};return g}})(domvm);(function(w){function r(a,c,d,g,m,r){var v=null,k=null,h=null;if("/"==d[0]){h=d;k=!1;g={};r=h.split("#");c=r[0].split("?");v=c[0];r=r[1];c[1]&&(m={},c[1].split("&").map(function(a){a=a.split("=");m[a[0]]=null==a[1]?!0:a[1]}));var G,w;for(w in a){d=a[w];var C=d.path;if(G=v.match(d.regexPath)){k=w;-1!==C.indexOf(":")&&(g={},G.shift(),C.replace(/:([^\/]+)/g,function(a,c){g[c]=G.shift()}));break}}}else{k=d;d=a[k];var C=c+d.path,I=d.vars||{},K=/^[^\/]+$/,h=-1!==C.indexOf(":")?v=C.replace(/:([^\/]+)/g,
function(a,c){if((I[c]||K).test(g[c]))return g[c]+="";throw Error("Invalid value for route '"+C+"' segment '"+c+"': '"+g[c]+"'");}):v=C;if(m){var h=h+"?",D;for(D in m)h+=D+(!0!==m[D]?"="+m[D]:"")+"&";h=h.slice(0,-1)}h+=r?"#"+r:""}return{href:h,name:k,path:v,segs:g,hash:r,query:m}}function v(a,c){for(var d in a){var g=a[d];g.regexPath=new RegExp("^"+c+g.path.replace(/:([^\/]+)/g,function(a,c){var d=""+g.vars[c];return"("+d.substring(1,d.lastIndexOf("/"))+")"})+"$")}}var m=[],c=null,d=!1,g="";w.route=
function(a,n){function x(){var a=location,a=d?a.href.substr(a.origin.length):a.hash.substr(1)||"/";return r(A,g,a)}var t=null,p={href:function(a,c,m,n,v){var t=r(A,g,a,c,m,n);return d?(a=function(a){p["goto"](t,null,null,null,v);a.preventDefault()},a.href=t.href,a):"#"+t.href},config:function(a){(d=a.useHist)&&(g=a.root||"");t=a.init||null},refresh:function(){p["goto"](x(),null,null,null,!0)},"goto":function(a,h,n,p,t){t=t||w;a.href||(a=r(A,g,a,h,n,p));if(!1===a.name)console.log("Could not find route");
else{h=null;for(n=0;n<m.length;n++)if(m[n].href===a.href){h=n;break}null===h&&(m.splice(c+1,1E4),m.push(a),h=m.length-1);a=m[c];n=m[h];p=!0;null!==c&&(p=(p=A[a.name].onexit)?p.apply(null,(a?[a.segs,a.query,a.hash]:[]).concat(n)):!0);if(!1!==p&&!1!==A[n.name].onenter.apply(null,(n?[n.segs,n.query,n.hash]:[]).concat(a))){if(d)history[t?"replaceState":"pushState"](null,"title",n.href);c=h}w=!1}},location:function(){return w?x():m[c]}},w=!0,A=a(p,n);v(A,g);window.onhashchange=window.onpopstate=function(a){(d||
"popstate"!=a.type)&&p["goto"](x(),null,null,null,!0)};t&&t();return p}})(domvm);
